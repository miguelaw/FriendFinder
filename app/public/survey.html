<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Friend Finder</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Acme" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="/css/styles.css">

</head>

<body>

    <div class="container">
        <div class="col-lg-12 text-center">
            <div id="headerSurv">
                <h1>Survey Questions</h1>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default" id="panel">
                    <div class="panel-heading">
                        <h4 class="panel-title"><strong>About You</strong></h4>
                    </div>
                    <div class="panel-body">
                        <form role="form">

                            <div class="form-group">
                                <label for="name">Name (Required)</label>
                                <input type="text" class="form-control" id="name">
                            </div>

                            <div class="form-group">
                                <label for="role">Link to Photo (Required)</label>
                                <input type="text" class="form-control" id="pic">
                            </div><br>

                            <div class="form-group">
                                <h5 class="panel-title">Question 1</h5>
                                <label for="exampleFormControlSelect1">You often think about humankind and its destiny.</label>
                                <select class="form-control" id="question1">
                                                    <option value="0">Choose your Answer</option>
                                                  <option value="1">1 (Strongly Disagree)</option>
                                                  <option value="2">2</option>
                                                  <option value="3">3</option>
                                                  <option value="4">4</option>
                                                  <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 2</h5>
                                <label for="exampleFormControlSelect1">You dream about world domination.</label>
                                <select class="form-control" id="question2">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 3</h5>
                                <label for="exampleFormControlSelect1">You prefer to act immediately rather than speculate about various options.</label>
                                <select class="form-control" id="question3">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 4</h5>
                                <label for="exampleFormControlSelect1">It is difficult to get you excited</label>
                                <select class="form-control" id="question4">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 5</h5>
                                <label for="exampleFormControlSelect1">You love being outdoors.</label>
                                <select class="form-control" id="question5">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 6</h5>
                                <label for="exampleFormControlSelect1">You often get so lost in thoughts that you ignore or forget your surroundings.</label>
                                <select class="form-control" id="question6">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 7</h5>
                                <label for="exampleFormControlSelect1">You like to be engaged in an active and fast-paced job.</label>
                                <select class="form-control" id="question7">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 8</h5>
                                <label for="exampleFormControlSelect1">You feel that the world is founded on compassion.</label>
                                <select class="form-control" id="question8">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 9</h5>
                                <label for="exampleFormControlSelect1">Strict observance of the established rules is likely to prevent attaining a good outcome.</label>
                                <select class="form-control" id="question9">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <h5 class="panel-title">Question 10</h5>
                                <label for="exampleFormControlSelect1">After prolonged socializing you feel you need to get away and be alone.</label>
                                <select class="form-control" id="question10">
                                        <option value="0">Choose your Answer</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2</option>
                                        <option value="3">3</option>
                                        <option value="4">4</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                </select>
                            </div>

                        </form>

                        <div class="text-center">
                            <button type="submit" class="btn btn-danger btn-md" id="submit-btn">SUBMIT</button>
                        </div><br>

                    </div>
                </div>
            </div>
        </div>

            <footer class="footer text-center">
                <div class="container">
                    <div id="footer">
                        <p><a href="/api/friends">API Friend List</a> | <a href="/">Home</a> | <a href="https://github.com/miguelaw/FriendFinder" target="_blank">GitHub Repo</a></p>
                    </div>
                </div>
            </footer>


            <!-- Modal -->
            <div id="modal1" class="modal fade" role="dialog">
                    <div class="modal-dialog">

                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title">Closest Friend Match</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                        <h5 id="userMatch"></h5>
                        <img id="userMatchImage" class="materialboxed" width="400" src="">
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary"><a href="/survey">Start Again!</a></button>
                    </div>
                  </div>
                </div>
              </div>

            <script type="text/javascript">

                // Activate submit button
                $('#submit-btn').on('click', function(event) {
                    event.preventDefault();

                    // Get user inputs
                    let userInput = {
                        name: $('#name').val().trim(),
                        photo: $('#pic').val().trim(),
                        scores: [
                            $('#question1').val().trim(),
                            $('#question2').val().trim(),
                            $('#question3').val().trim(),
                            $('#question4').val().trim(),
                            $('#question5').val().trim(),
                            $('#question6').val().trim(),
                            $('#question7').val().trim(),
                            $('#question8').val().trim(),
                            $('#question9').val().trim(),
                            $('#question10').val().trim()
                        ]
                    };

                    // Add user inputs to friends list
                    fetch('/api/friends', {
                        method: 'POST', // or 'PUT'
                        body: JSON.stringify(userInput), 
                        headers: new Headers({
                            'Content-Type': 'application/json'
                        })
                        }).then(res => res.json())
                        .catch(error => console.error('Error:', error))
                        .then(data =>{
                            console.log("data: ", data);
                            // Set the name and image values of friend match
                            $("#userMatch").html(data.matchName);
                            $("#userMatchImage").attr("src", data.matchImage);

                            // Toggle open the modal dialog
                            $('#modal1').modal('toggle');
                        });
                    
                });
                
            </script>

</body>

</html>